DOCUMENTATION - A Developer Manual


Steps  to enable C code visualisation


1. Online python tutor consists of features of visualisation of multiple languages like C,Java,Python ...etc.But after deploying Online Python Tutor webapp ,requests for visualisations of code of all languages except python (which essentially requires json trace of code;go through this link for further info) were processed by server of pgbovine(Philip Guo)(which bounds it to require better internet connection) .
2.  Opt-cpp-backend is an open source repository to generate json trace of c and cpp codes
3. The HTML page of Online Python Tutor is mainly in v5-unity/visualize.html and the main javascript running with it is  v5-unity/build/visualize-bundle.js which passes  the input given by user and to render visualisations for the trace received by the backend.
4. The trace generated by valgrind is not in proper format as accepted by opt so another script vg_to_opt_trace.py converts it
5. Run_cpp_backend.py is the main backend of C and  CPP files where all calls which :
1. Compiles the code
2. Generates a valgrind trace storing it in vgtrace extension
3. Use vg_to_opt_trace.py script to convert the vgtrace to opt trace



Steps undertaken to integrate it with prutor:


   1. Then we built docker for opt (merged with ctutor) .
   2. Since the bottle framework’s default web_server is not good for production and is only helpful for deployment and testing. We switched over to gunicorn server.
   3. The docker was running on port 8003 
   4. Haproxy was used as a proxy server to proxy the incoming request of port 82 for CTutor to port 8003.
   5. The docker was added to consul discovery service for proper health check and to see the state of the following docker. 
                  

To do some changes:
One don’t have to deploy the whole prutor to do changes in ctutor. One could run the command 
        “Python bottle_server.py”
Which would deploy ctutor on your localhost:8003  .
For further details refer to opt doc (https://github.com/pgbovine/OnlinePythonTutor/blob/master/v3/docs/developer-overview.md)
Also a note: The visualize.html page has some components removed for security purpose so download the page from the original source of pgbovine repository  rather than using the one in current repository



Some hints to Add Support for other languages : 

1) Python2 and Python3 :- Already Deployed.  Just some tags of visualize.html has to be uncommented and the request that is routing it in bottle_server.py should be allowed by the proxy server (in particular for prutor the proxy server is haproxy and files to be changed is haproxy.tmpl).
2) Cpp : The changes are almost like C except the extension of the files has to be cpp now.
3) Other Languages : They would need an online connection at present if you want to enable them. Their backend is still not connected with pythontutor and hence are not deployable on own’s server without an internet connection.
One may try to work on integrating frontend and backend as it was done for c and cpp by following the same path as above mentioned for C/C++.
